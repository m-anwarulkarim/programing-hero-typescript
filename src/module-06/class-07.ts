// ===========================================================
//  keyof ржПржмржВ keyof Constraint тАФ TypeScript ржПрж░ рж╕рж╣ржЬ ржмрзНржпрж╛ржЦрзНржпрж╛
// ===========================================================

/*
 рзз keyof ржХрзА?

 keyof рж╣рж▓рзЛ ржПржоржи ржПржХржЯрж╛ Type Operator ржпрж╛ ржХрзЛржирзЛ Object ржЯрж╛ржЗржкрзЗрж░
рж╕ржмржЧрзБрж▓рзЛ "property name" (key) ржХрзЗ ржПржХрж╕рж╛ржерзЗ Union Type рж╣рж┐рж╕рзЗржмрзЗ ржзрж░рзЗ ржлрзЗрж▓рзЗред

ржорж╛ржирзЗ ржпржжрж┐ рждрзЛржорж╛рж░ ржХрж╛ржЫрзЗ ржПржХржЯрж╛ object ржерж╛ржХрзЗ, ржпрзЗржоржи:

type Example = {
  name: string;
  age: number;
}

рждрж╛рж╣рж▓рзЗ,
keyof Example тЮЬ "name" | "age"

ржЕрж░рзНржерж╛рзО keyof ржжрж┐рзЯрзЗ рждрзБржорж┐ Object-ржПрж░ keys ржЧрзБрж▓рзЛржХрзЗржЗ ржЯрж╛ржЗржк рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЛред
*/

// ЁЯФ╣ Example 1
type Vehicle = {
  car: string;
  bike: string;
  cng: string;
};

// ржирж┐ржЪрзЗрж░ ржжрзБржЗржЯрж╛ ржЖрж╕рж▓рзЗ ржПржХрж┐ ржХрж╛ржЬ ржХрж░рзЗ
type VehicleKeysManual = "car" | "bike" | "cng";
type VehicleKeysAuto = keyof Vehicle; // keyof ржжрж┐рзЯрзЗ ржЖржЧрзЗрж░ржЯрж╛рж░ ржорждрзЛржЗ Union Type рждрзИрж░рж┐ рж╣рж▓рзЛ

const myVehicle: VehicleKeysAuto = "bike"; // тЬЕ ржарж┐ржХ ржЖржЫрзЗ
// const wrongVehicle: VehicleKeysAuto = "truck"; // тЭМ Error: truck ржирзЗржЗ Vehicle ржЯрж╛ржЗржкрзЗ

// ===========================================================
// тЬЕ рзия╕П. keyof ржХрж┐ржнрж╛ржмрзЗ object access ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ?
// ===========================================================

type User = {
  id: number;
  name: string;
  address: {
    city: string;
  };
};

const user: User = {
  id: 1,
  name: "Anwarul Karim",
  address: {
    city: "Khulna",
  },
};

// рж╕рж╛ржзрж╛рж░ржгржнрж╛ржмрзЗ object ржерзЗржХрзЗ value ржирзЗржУржпрж╝рж╛ ржпрж╛ржпрж╝ ржПржЗржнрж╛ржмрзЗ
const id = user["id"];
const name = user["name"];
const address = user["address"];

/*
ржПржЗржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ ржарж┐ржХржЗ, ржХрж┐ржирзНрждрзБ рж╕ржорж╕рзНржпрж╛ржЯрж╛ рж╣рж▓рзЛ тАФ
=> key ржЧрзБрж▓рзЛ рж╣рж╛рж░рзНржбржХрзЛржб ржХрж░рж╛ред
=> ржмрзЬ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗ key ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ ржЕржирзЗржХ ржЬрж╛рзЯржЧрж╛рзЯ error рж╣рзЯред
=> object ржЯрж╛ржЗржк ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ ржЕржирзНржп ржХрзЛржб ржнрзЗржЩрзЗ ржпрж╛рзЯред

ЁЯФ╣ рждрж╛ржЗ ржЖржорж░рж╛ dynamic ржнрж╛ржмрзЗ, Type-safe ржкржжрзНржзрждрж┐рждрзЗ value ржмрзЗрж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЛ
Generics + keyof constraint ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред
*/

// ===========================================================
// тЬЕ рзйя╕П.  keyof Constraint тАФ Generics ржПрж░ рж╕рж╛ржерзЗ
// ===========================================================

/*
keyof constraint ржорж╛ржирзЗ рж╣рж▓рзЛ:
ржЖржорж░рж╛ ржПржоржи ржПржХржЯрж╛ generic function ржмрж╛ржирж╛ржмрзЛ,
ржпрзЗржЯрж╛ ржпрзЗржХрзЛржирзЛ object ржерзЗржХрзЗ value ржмрзЗрж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ,
ржХрж┐ржирзНрждрзБ рж╢рзБржзрзБржорж╛рждрзНрж░ valid key ржжрж┐рзЯрзЗржЗред

 рж╕рж┐ржиржЯрзНржпрж╛ржХрзНрж╕:
<T, K extends keyof T>

ржПржЦрж╛ржирзЗ:
=>  T = Object Type
=> K = рж╢рзБржзрзБржорж╛рждрзНрж░ рж╕рзЗржЗ Object ржПрж░ key ржЧрзБрж▓рзЛрж░ ржоржзрзНржп ржерзЗржХрзЗ ржПржХржЯрж╛ key
=> extends keyof T = ржорж╛ржирзЗ тАЬK ржЕржмрж╢рзНржпржЗ ржР object-ржПрж░ key рж╣рждрзЗ рж╣ржмрзЗтАЭ
*/
// NOTE - ########################################################################

const getPropertyFromObj = <T, K extends keyof T>(obj: T, key: K): T[K] => {
  return obj[key];
};

// тЬЕ ржмрзНржпржмрж╣рж╛рж░
const userName = getPropertyFromObj(user, "name"); // string
const userAddress = getPropertyFromObj(user, "address"); // { city: string }
// const wrongKey = getPropertyFromObj(user, "email"); // тЭМ Error: email ржирзЗржЗ User ржЯрж╛ржЗржкрзЗ

/*
 ржХрзЗржи ржПржЯрж╛ ржжрж╛рж░рзБржг?
--------------------------------
1я╕П. ржХрзЛржирзЛ ржнрзБрж▓ key ржжрж┐рж▓рзЗ TypeScript error ржжрзЗржЦрж╛ржмрзЗред
2я╕П. ржпрзЗржЗ key ржжрж╛ржУ, рж╕рзЗржЗ key ржЕржирзБржпрж╛рзЯрзА value-ржПрж░ ржЯрж╛ржЗржк ржирж┐рж░рзНржзрж╛рж░ржг рж╣ржмрзЗред
3я╕П. function ржЯрж┐ Reusable тАФ ржпрзЗ ржХрзЛржирзЛ object ржПрж░ ржЬржирзНржп ржХрж╛ржЬ ржХрж░ржмрзЗред
*/

// ===========================================================
// тЬЕ рзкя╕ПтГг ржмрж╛рж╕рзНрждржм ржЙржжрж╛рж╣рж░ржг тАФ ржЕржирзНржп Object ржП ржмрзНржпржмрж╣рж╛рж░
// ===========================================================

const product = {
  name: "TypeScript Mastery Course",
  price: 999,
  available: true,
};

const prodName = getPropertyFromObj(product, "name"); // тЬЕ string
const prodPrice = getPropertyFromObj(product, "price"); // тЬЕ number
const prodAvailable = getPropertyFromObj(product, "available"); // тЬЕ boolean

console.log(prodName, prodPrice, prodAvailable);

/*
 keyof ржПрж░ ржмрзНржпрж╛ржЦрзНржпрж╛ ржПржХ рж▓рж╛ржЗржирзЗ:

=> keyof = Object ржПрж░ property name ржЧрзБрж▓рзЛрж░ union type
=> extends keyof = рж╢рзБржзрзБржорж╛рждрзНрж░ ржР Object ржПрж░ valid key ржЧрзБрж▓рзЛржХрзЗржЗ ржЕржирзБржорждрж┐ ржжрзЗржпрж╝
*/

// ===========================================================
// тЬЕ рзля╕ПтГг keyof + typeof тАФ ржПржХрж╕рж╛ржерзЗ ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?
// ===========================================================

/*
typeof ржжрж┐рзЯрзЗ ржЖржорж░рж╛ ржХрзЛржирзЛ object-ржПрж░ ржЯрж╛ржЗржк ржзрж░рждрзЗ ржкрж╛рж░рж┐ред
рждрж╛рж░ржкрж░ рж╕рзЗржЗ ржЯрж╛ржЗржкрзЗрж░ ржУржкрж░ keyof ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рждрж╛рж░ key ржЧрзБрж▓рзЛ ржмрзЗрж░ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

ржПржЯрж╛ ржЦрзБржм ржХрж╛ржЬрзЗ рж▓рж╛ржЧрзЗ dynamic object ржерзЗржХрзЗ key ржмрзЗрж░ ржХрж░рждрзЗред
*/

const student = {
  id: 101,
  name: "Sakib",
  department: "CSE",
};

type StudentKeys = keyof typeof student; // "id" | "name" | "department"

const myKey: StudentKeys = "department"; // тЬЕ valid
// const wrongKey2: StudentKeys = "age"; // тЭМ Error

/*
 рж╕рж╣ржЬржнрж╛ржмрзЗ ржмрж▓рж▓рзЗ:
typeof тЮЬ object ржПрж░ ржЯрж╛ржЗржк ржзрж░рзЗ
keyof тЮЬ рж╕рзЗржЗ ржЯрж╛ржЗржкрзЗрж░ key ржЧрзБрж▓рзЛ ржмрзЗрж░ ржХрж░рзЗ
*/

// ===========================================================
//  рж╕ржВржХрзНрж╖рзЗржкрзЗ ржоржирзЗ рж░рж╛ржЦрзЛ:
// ===========================================================

/*
=>  keyof = Object-ржПрж░ property name ржЧрзБрж▓рзЛрж░ Union Type рждрзИрж░рж┐ ржХрж░рзЗ
=>  keyof constraint (<T, K extends keyof T>) = рж╢рзБржзрзБржорж╛рждрзНрж░ valid key ржЧрзБрж▓рзЛржХрзЗржЗ ржЕржирзБржорждрж┐ ржжрзЗрзЯ
=>  typeof + keyof = runtime object ржерзЗржХрзЗ key type dynamically ржмрзЗрж░ ржХрж░рж╛рж░ ржЙржкрж╛рзЯ
=>  ржПржЗ combination рждрзЛржорж╛ржХрзЗ ржжрзЗрзЯ Type-safe dynamic programming ржПрж░ ржХрзНрж╖ржорждрж╛ ЁЯТк
=> 

// ===========================================================
//  END тАФ keyof & keyof Constraint 
// ===========================================================
*/
